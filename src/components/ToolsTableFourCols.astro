---
import data from "../data/oil-types.yaml";

type OilRow = {
  type: string;
  name: string;
  usage: string;
  viscosity_grade: string;
  price: number;
  cylinders: number;
};

const rows = data.properties.rows as OilRow[];

const numberToWords = (num: number): string => {
  const words: Record<number, string> = {
    0: "Zero", 1: "One", 2: "Two", 3: "Three", 4: "Four",
    5: "Five", 6: "Six", 7: "Seven", 8: "Eight", 9: "Nine", 10: "Ten",
  };
  return words[num] ?? num.toString();
};
---

<h3 style="color: #2c3e50;">{data.title}</h3>
<p>{data.shortdesc}</p>

<div style="overflow-x: auto;">
  <table style="border-collapse: collapse; width: 100%; min-width: 600px;">
    <thead style="background-color: #3498db;">
      <tr>
        <th style="padding: 8px; border: 1px solid #ddd; color: white;">Type</th>
        <th style="padding: 8px; border: 1px solid #ddd; color: white;">Brand</th>
        <th style="padding: 8px; border: 1px solid #ddd; color: white;">Cylinders</th>
        <th style="padding: 8px; border: 1px solid #ddd; color: white;">Viscosity grade</th>
        <th style="padding: 8px; border: 1px solid #ddd; color: white;">Price</th>
      </tr>
    </thead>
    <tbody>
      {rows.map((row) => (
        <tr style="border: 1px solid #ddd;">
          <td data-label="Type" style="padding: 8px; border: 1px solid #ddd; font-weight: bold;">
            {row.type}
          </td>
          <td data-label="Brand" style="padding: 8px; border: 1px solid #ddd;">
            {row.name}
          </td>
          <td data-label="Cylinders" style="padding: 8px; border: 1px solid #ddd;">
            {numberToWords(row.cylinders)}-cylinder engines
          </td>
          <td data-label="Viscosity grade" style="padding: 8px; border: 1px solid #ddd;">
            {row.viscosity_grade}
          </td>
          <td data-label="Price" style="padding: 8px; border: 1px solid #ddd;">
            ${row.price.toFixed(2)}
          </td>
        </tr>
      ))}
    </tbody>
  </table>
</div>

<style>
  @media screen and (max-width: 600px) {
    table, thead, tbody, th, td, tr {
      display: block;
      width: 100%;
    }

    thead tr {
      display: none;
    }

    tbody tr {
      margin-bottom: 15px;
      border: 1px solid #ddd;
      padding: 8px;
    }

    td {
      display: block;
      text-align: left;
      padding: 8px 0;
      border: none;
      border-bottom: 1px solid #ddd;
    }

    td::before {
      content: attr(data-label);
      font-weight: bold;
      display: block;
      margin-bottom: 4px;
    }
  }
</style>
